<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{actor.name}} - Character Sheet</title>
  <style>
    body {
      font-family: 'Signika', sans-serif;
      margin: 0;
      padding: 0;
      background: #f0f0e0;
      color: #191813;
    }
    .dnd5e-sheet {
      max-width: 800px;
      margin: 20px auto;
      padding: 10px;
      background: #eee5ce;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
      border: 1px solid #b5b3a4;
      border-radius: 5px;
    }
    .character-header {
      display: flex;
      align-items: center;
      border-bottom: 2px solid #c9c7b8;
      padding-bottom: 10px;
      margin-bottom: 10px;
    }
    .profile-img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 5px;
      border: 1px solid #b5b3a4;
      margin-right: 15px;
    }
    .header-details h1 {
      margin: 0 0 5px 0;
      color: #4b4a44;
    }
    .header-details .character-info {
      display: flex;
      gap: 10px;
      font-size: 0.9em;
    }
    .character-info .info-item {
      padding-right: 10px;
      border-right: 1px solid #c9c7b8;
    }
    .character-info .info-item:last-child {
      border-right: none;
    }
    .header-details .info-label {
      font-weight: bold;
      color: #58180d;
    }
    .attributes {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin: 15px 0;
    }
    .attribute {
      text-align: center;
      padding: 5px;
      background: #fff;
      border: 1px solid #c9c7b8;
      border-radius: 3px;
    }
    .attribute .attr-name {
      text-transform: uppercase;
      font-size: 0.8em;
      font-weight: bold;
      color: #58180d;
    }
    .attribute .attr-value {
      font-size: 1.8em;
      font-weight: bold;
    }
    .attribute .attr-mod {
      font-size: 1.2em;
    }
    .tabs {
      display: flex;
      border-bottom: 1px solid #c9c7b8;
      margin-bottom: 15px;
    }
    .tab {
      padding: 5px 15px;
      margin-right: 5px;
      cursor: pointer;
      border: 1px solid #c9c7b8;
      border-bottom: none;
      border-radius: 3px 3px 0 0;
      background: #e0dcd0;
    }
    .tab.active {
      background: #fff;
      position: relative;
      bottom: -1px;
    }
    .tab-content {
      background: #fff;
      padding: 10px;
      border: 1px solid #c9c7b8;
      border-top: none;
    }
    .tab-content:not(.active) {
      display: none;
    }
    .items-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .item {
      display: flex;
      align-items: center;
      padding: 5px;
      border-bottom: 1px solid #e0dcd0;
    }
    .item-img {
      width: 30px;
      height: 30px;
      object-fit: cover;
      margin-right: 10px;
      border: 1px solid #c9c7b8;
    }
  </style>
</head>
<body>
  <div class="dnd5e-sheet">
    <div class="character-header">
      <img src="{{actor.img}}" alt="{{actor.name}}" class="profile-img">
      <div class="header-details">
        <h1>{{actor.name}}</h1>
        <div class="character-info">
          {{#if actor.system.details.race}}
            <div class="info-item">
              <span class="info-label">Race:</span> {{actor.system.details.race}}
            </div>
          {{/if}}
          {{#if actor.system.details.class}}
            <div class="info-item">
              <span class="info-label">Class:</span> {{actor.system.details.class}}
            </div>
          {{/if}}
          {{#if actor.system.details.level}}
            <div class="info-item">
              <span class="info-label">Level:</span> {{actor.system.details.level}}
            </div>
          {{/if}}
        </div>
      </div>
    </div>

    {{#if isDnd5e}}
      <!-- Attributes (D&D 5e) -->
      <div class="attributes">
        <div class="attribute">
          <div class="attr-name">Strength</div>
          <div class="attr-value">{{actor.system.abilities.str.value}}</div>
          <div class="attr-mod">{{actor.system.abilities.str.mod}}</div>
        </div>
        <div class="attribute">
          <div class="attr-name">Dexterity</div>
          <div class="attr-value">{{actor.system.abilities.dex.value}}</div>
          <div class="attr-mod">{{actor.system.abilities.dex.mod}}</div>
        </div>
        <div class="attribute">
          <div class="attr-name">Constitution</div>
          <div class="attr-value">{{actor.system.abilities.con.value}}</div>
          <div class="attr-mod">{{actor.system.abilities.con.mod}}</div>
        </div>
        <div class="attribute">
          <div class="attr-name">Intelligence</div>
          <div class="attr-value">{{actor.system.abilities.int.value}}</div>
          <div class="attr-mod">{{actor.system.abilities.int.mod}}</div>
        </div>
        <div class="attribute">
          <div class="attr-name">Wisdom</div>
          <div class="attr-value">{{actor.system.abilities.wis.value}}</div>
          <div class="attr-mod">{{actor.system.abilities.wis.mod}}</div>
        </div>
        <div class="attribute">
          <div class="attr-name">Charisma</div>
          <div class="attr-value">{{actor.system.abilities.cha.value}}</div>
          <div class="attr-mod">{{actor.system.abilities.cha.mod}}</div>
        </div>
      </div>
    {{/if}}

    <!-- Tabs -->
    <div class="tabs">
      <div class="tab active" data-tab="summary">Summary</div>
      <div class="tab" data-tab="items">Items</div>
      <div class="tab" data-tab="spells">Spells</div>
      <div class="tab" data-tab="features">Features</div>
      <div class="tab" data-tab="bio">Biography</div>
    </div>

    <!-- Tab content -->
    <div class="tab-content active" data-tab="summary">
      <div class="summary-info">
        <h3>Character Summary</h3>
        <p>{{actor.system.details.biography.summary}}</p>
      </div>
    </div>

    <div class="tab-content" data-tab="items">
      <h3>Items</h3>
      <ul class="items-list">
        {{#each actor.items as |item|}}
          {{#if (eq item.type "weapon")}}
            <li class="item">
              <img src="{{item.img}}" class="item-img">
              <span>{{item.name}} ({{item.system.damage.parts.[0].[0]}} {{item.system.damage.parts.[0].[1]}})</span>
            </li>
          {{/if}}
        {{/each}}
      </ul>
    </div>

    <div class="tab-content" data-tab="spells">
      <h3>Spells</h3>
      <ul class="items-list">
        {{#each actor.items as |item|}}
          {{#if (eq item.type "spell")}}
            <li class="item">
              <img src="{{item.img}}" class="item-img">
              <span>{{item.name}} (Level {{item.system.level}})</span>
            </li>
          {{/if}}
        {{/each}}
      </ul>
    </div>

    <div class="tab-content" data-tab="features">
      <h3>Features & Traits</h3>
      <ul class="items-list">
        {{#each actor.items as |item|}}
          {{#if (eq item.type "feat")}}
            <li class="item">
              <img src="{{item.img}}" class="item-img">
              <span>{{item.name}}</span>
            </li>
          {{/if}}
        {{/each}}
      </ul>
    </div>

    <div class="tab-content" data-tab="bio">
      <h3>Biography</h3>
      <div>{{{actor.system.details.biography.value}}}</div>
    </div>
  </div>

  <script>
    // Simple tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        // Deactivate all tabs
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        
        // Activate selected tab
        tab.classList.add('active');
        const tabTarget = tab.dataset.tab;
        document.querySelector(`.tab-content[data-tab="${tabTarget}"]`).classList.add('active');
      });
    });
  </script>
</body>
</html>